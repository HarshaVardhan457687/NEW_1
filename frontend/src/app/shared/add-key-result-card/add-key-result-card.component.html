<div class="modal-overlay" (click)="onOverlayClick($event)">
  <div class="key-result-modal">
    <div class="modal-header">
      <h2>Add Key Result</h2>
      <button class="close-btn" (click)="closeForm()">Ã—</button>
    </div>
    <form [formGroup]="keyResultForm" (ngSubmit)="onSubmit()" #form="ngForm">
      <div class="form-content">
        <div class="form-group">
          <label>
            Key Result Name
            <span class="required">*</span>
          </label>
          <input type="text" formControlName="name" placeholder="Enter key result name"
            [class.error]="isFieldInvalid('name')">
          <div class="error-message" *ngIf="isFieldInvalid('name')">
            <i class="fas fa-exclamation-circle"></i>
            Key result name is required
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>
              Target Value
              <span class="required">*</span>
            </label>
            <input type="number" formControlName="targetValue" placeholder="Enter target value"
              [class.error]="isFieldInvalid('targetValue')">
            <div class="error-message" *ngIf="isFieldInvalid('targetValue')">
              <i class="fas fa-exclamation-circle"></i>
              Target value is required
            </div>
          </div>
          <div class="form-group">
            <label>
              Unit
              <span class="required">*</span>
            </label>
            <input type="text" formControlName="unit" placeholder="Enter unit (e.g., %, $)"
              [class.error]="isFieldInvalid('unit')">
            <div class="error-message" *ngIf="isFieldInvalid('unit')">
              <i class="fas fa-exclamation-circle"></i>
              Unit is required
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>
              Due Date
              <span class="required">*</span>
            </label>
            <input type="date" formControlName="dueDate"
              [class.error]="isFieldInvalid('dueDate')">
            <div class="error-message" *ngIf="isFieldInvalid('dueDate')">
              <i class="fas fa-exclamation-circle"></i>
              Due date is required
            </div>
          </div>
          <div class="form-group">
            <label>
              Priority
              <span class="required">*</span>
            </label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" formControlName="priority" value="high">
                High
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="priority" value="medium">
                Medium
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="priority" value="low">
                Low
              </label>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('priority')">
              <i class="fas fa-exclamation-circle"></i>
              Priority is required
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>
            Assigned Team
            <span class="required">*</span>
          </label>
          <select formControlName="assignedTeam" [class.error]="isFieldInvalid('assignedTeam')">
            <option value="">Select a team</option>
            <option *ngFor="let team of savedTeams" [value]="team.name">{{ team.name }}</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('assignedTeam')">
            <i class="fas fa-exclamation-circle"></i>
            Assigned team is required
          </div>
        </div>
      </div>
    </form>
    <div class="button-row">
      <button type="button" class="cancel-btn" (click)="closeForm()">Cancel</button>
      <button type="button" class="save-btn" (click)="onSubmit()">Add Key Result</button>
    </div>
  </div>
</div> 